<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Probably the most complete UI kit out there. Multiple functionalities and controls added,  extended color palette and beautiful typography, designed as its own extended version of Bootstrap at  the highest level of quality.                             ">
    <meta name="author" content="Webpixels">
    <title>Boomerang UI Kit - Free Bootstrap Framework by Webpixels</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700,800|Roboto:400,500,700" rel="stylesheet">
    <!-- Theme CSS -->
    <link type="text/css" href="css/theme.css" rel="stylesheet">
    <link type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet">

    <!-- Demo CSS - No need to use these in your project -->
    <link type="text/css" href="css/demo.css" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-blue py-4">
      <div class="container">
        <a class="navbar-brand" href="../"><strong>INSTANCE</strong> </a>
        <button class="navbar-toggler" type="button" data-action="offcanvas-open" data-target="#navbar_main" aria-controls="navbar_main" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse offcanvas-collapse" id="navbar_main">
          <ul class="navbar-nav ml-auto align-items-lg-center">
            <h6 class="dropdown-header font-weight-600 d-lg-none px-0">Menu</h6>
            <li class="nav-item active">
              <a class="nav-link" href="./index.html">Home</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbar_main_dropdown_1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects</a>
              <div class="dropdown-menu" aria-labelledby="navbar_1_dropdown_1">
                <a class="dropdown-item" href="./projects/terminus.html">Terminus</a>
                <a class="dropdown-item" href="./projects/instance.html">INSTANCE</a>
                <a class="dropdown-item" href="./projects/forecasting.html">Forecasting</a>
                <a class="dropdown-item" href="./projects/scalex.html">Scale-X</a>
              </div>
            </li>

          </ul>
        </div>
      </div>
    </nav>
    <main class="main">
      <section data-spotlight="fullscreen" >

        <div class="spotlight-holder py-lg pt-lg-3">
          <div class="container">
            <h2 class="heading h3 strong-600 text-center mb-5">
              View Previous Tests Result
            </h2>
            <div class="row-wrapper">
              <div class="row cols-xs-space cols-sm-space cols-md-space">
                <div class="container">
                  <div class="card-group flex-column flex-md-row">
                    <div class="col-md-12">
                      Choose the Cloud Service Provider
                    </div>
                  </div>
                </div>
              </div>
              <div class="row cols-xs-space cols-sm-space cols-md-space">
                <div class="container">
                  <div class="card-group flex-column flex-md-row">
                    <div class="col-lg-12">
                      <ul class="nav nav-pills nav-fill flex-column flex-sm-row" id="myTab" role="tablist">
                        <li class="nav-item">
                          <a class="nav-link mb-sm-6 active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true" >AWS</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link mb-sm-6" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false" >Google Compute Platform</a>
                        </li>

                      </ul>
                      <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            <div class="card-group flex-column flex-md-row">
                                <div class="col-sm-6">
                                    <div id="allExpsInstancesBoot"></div>
                                </div>
                                <div class="col-sm-6">
                                    <div id="allExpsInstancesShut"></div>
                                </div>
                            </div>
                          Select the approach
                          <ul class="nav nav-pills nav-fill flex-column flex-sm-row" id="myTab1" role="tablist">
                            <li class="nav-item">
                              <a class="nav-link mb-sm-4 active" id="approach1_aws" data-toggle="tab" href="#approach1_aws_tab" role="tab" aria-controls="home" aria-selected="true">Average of Random Multi-Interleaved</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link mb-sm-4" id="approach2_aws" data-toggle="tab" href="#approach2_aws_tab" role="tab" aria-controls="profile" aria-selected="false">Regression</a>
                            </li>

                          </ul>
                          <div class="tab-content" id="myTab1Content">
                            <div class="tab-pane fade show active" id="approach1_aws_tab" role="tabpanel" aria-labelledby="approach1_aws">
                                <div class="card-group flex-column flex-md-row">
                                    <div class="col-sm-6">
                                        <div id="allInstancesBoot"></div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div id="allInstancesShut"></div>
                                    </div>
                                </div>

                              <table id="bstime" class="stripe" style="width:100%">
                                <thead>
                                <tr>
                                  <th>Type of Instance</th>
                                  <th>Number of Instances</th>
                                  <th>BootTime (sec)</th>
                                  <th>ShutdownTime (sec)</th>
                                  <th></th>
                                </tr>
                                </thead>
                                <tbody>
                                </tbody>
                                <tfoot>
                                <tr>
                                  <th>Type of Instance</th>
                                  <th>Number of Instances</th>
                                  <th>BootTime (sec)</th>
                                  <th>ShutdownTime (sec)</th>
                                  <th></th>
                                </tr>
                                </tfoot>
                              </table>
                                <div id="myDiv"></div>
                            </div>
                            <div class="tab-pane fade" id="approach2_aws_tab" role="tabpanel" aria-labelledby="approach2_aws" style="display: block">
                                <div class="card-group flex-column flex-md-row" >
                                    <div class="col-sm-6">
                                        <div id="allInstancesBootPredicted"></div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div id="allInstancesShutPredicted"></div>
                                    </div>
                                </div>
                                <table id="predictedbstime" class="stripe" style="width:100%">
                                    <thead>
                                    <tr>
                                        <th>Type of Instance</th>
                                        <th>Number of Instances</th>
                                        <th>BootTime (sec)</th>
                                        <th>ShutdownTime (sec)</th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                    <tfoot>
                                    <tr>
                                        <th>Type of Instance</th>
                                        <th>Number of Instances</th>
                                        <th>BootTime (sec)</th>
                                        <th>ShutdownTime (sec)</th>
                                        <th></th>
                                    </tr>
                                    </tfoot>
                                </table>
                                <div id="myDivPredicted"></div>
                            </div>

                          </div>
                        </div>
                        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                          <p>Under COnstruction</p>
                        </div>

                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        </div>
          <footer class="pt-2 pb-2 footer  footer-dark bg-tertiary">
              <div class="container">
                  <hr>
                  <div class="d-flex align-items-center">
          <span class="">
            &copy; 2018 <a href="" class="footer-link" target="_blank">Cloud-D8s</a>. All rights reserved.
          </span>
                      <ul class="nav ml-lg-auto">
                          <li class="nav-item">
                              <a class="nav-link active" href="" target="_blank"><i class="fab fa-instagram"></i></a>
                          </li>
                          <li class="nav-item">
                              <a class="nav-link" href="#" target="_blank"><i class="fab fa-facebook"></i></a>
                          </li>
                          <li class="nav-item">
                              <a class="nav-link" href="#" target="_blank"><i class="fab fa-github"></i></a>
                          </li>
                          <li class="nav-item">
                              <a class="nav-link" href="#" target="_blank"><i class="fab fa-dribbble"></i></a>
                          </li>
                      </ul>
                  </div>
              </div>
          </footer>
      </section>

    </main>

    <!-- Core -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/popper/popper.min.js"></script>
    <script src="js/bootstrap/bootstrap.min.js"></script>
    <!-- FontAwesome 5 -->
    <script src="vendor/fontawesome/js/fontawesome-all.min.js" defer></script>
    <!-- Page plugins -->
    <script src="vendor/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script src="vendor/bootstrap-tagsinput/bootstrap-tagsinput.min.js"></script>
    <script src="vendor/input-mask/input-mask.min.js"></script>
    <script src="vendor/nouislider/js/nouislider.min.js"></script>
    <script src="vendor/textarea-autosize/textarea-autosize.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- Theme JS -->
    <script src="js/theme.js"></script>
  <script>
      $(document).ready(function () {
          makeGraphAllInstances();
          var data = [];
          var data2 = [];

          var dataPredicted = [];
          var data2Predicted = [];

          fetch("/getAllVMTypesBootShutDownDataAvg")
                  .then(response => response.json())
      .then(instancesList => {
              var allData = [];
          //Once we fetch the list, we iterate over it
          instancesList.forEach(instance => {
              // Create the table row
              var x = [];
          var y = [];
          var y2 = [];
          instance.BootShutdownRate.forEach(rate => {
              var inst = [];
          inst.push(instance.InstanceType);
          inst.push(rate.NumInstances);
          inst.push(rate.BootTime.Avg);
          inst.push(rate.ShutdownTime.Avg);
          inst.push(" <button type=\"button\" class=\"btn btn-block btn-outline-primary\" onclick='makeGraph(\"" + instance.InstanceType + "\", \"myDiv\")'>Graph</button>");
          allData.push(inst);
          x.push(rate.NumInstances);
          y.push(rate.BootTime.Avg);
          y2.push(rate.ShutdownTime.Avg);

      });
          var trace1 = {
              type: "scatter",
              mode: "lines",
              name: instance.InstanceType,
              x: x,
              y: y,
              line: {color: '#17BxCF'},

          };
          var trace2 = {
              type: "scatter",
              mode: "lines",
              name: instance.InstanceType,
              x: x,
              y: y2,
              line: {color: '#17BxCF'},

          };

          data.push(trace1);
          data2.push(trace2);
      });
          $('#bstime').DataTable({
              data: allData
          });
          var layout = {
              title: "Booting Time Graph for all instance types ",
              xaxis: {
                  title: 'Instances Number',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              },
              yaxis: {
                  title: 'Time(in secs)',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              }

          };
          var layout2 = {
              title: "Shutting-Down Time Graph for all instance types ",
              xaxis: {
                  title: 'Instances Number',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              },
              yaxis: {
                  title: 'Time(in secs)',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              },

          };
          Plotly.newPlot('allInstancesBoot', data, layout);
          Plotly.newPlot('allInstancesShut', data2, layout2);
      });
          makeGraph("t2.nano", "myDiv");


          fetch("/getAllVMTypesBootShutDownDataRegression")
                  .then(response => response.json())
      .then(instancesList => {
              var allData = [];
          //Once we fetch the list, we iterate over it
          instancesList.forEach(instance => {
              // Create the table row
              var x = [];
          var y = [];
          var y2 = [];
          instance.InstanceValues.forEach(rate => {
              var inst = [];
          inst.push(instance.InstanceType);
          inst.push(rate.NumInstances);
          inst.push(rate.BootTime);
          inst.push(rate.ShutDownTime);
          inst.push(" <button type=\"button\" class=\"btn btn-block btn-outline-primary\" onclick='makeGraph(\"" + instance.InstanceType + "\", \"myDivPredicted\")'>Graph</button>");
          allData.push(inst);
          x.push(rate.NumInstances);
          y.push(rate.BootTime);
          y2.push(rate.ShutDownTime);

      });
          var trace1 = {
              type: "scatter",
              mode: "lines",
              name: instance.InstanceType,
              x: x,
              y: y,
              line: {color: '#17BxCF'},

          };
          var trace2 = {
              type: "scatter",
              mode: "lines",
              name: instance.InstanceType,
              x: x,
              y: y2,
              line: {color: '#17BxCF'},

          };

          dataPredicted.push(trace1);
          data2Predicted.push(trace2);
      });
          $('#predictedbstime').DataTable({
              data: allData
          });
          var layout = {
              title: "Booting Time Graph for all instance types ",
              xaxis: {
                  title: 'Instances Number',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              },
              yaxis: {
                  title: 'Time(in secs)',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              }

          };
          var layout2 = {
              title: "Shutting-Down Time Graph for all instance types ",
              xaxis: {
                  title: 'Instances Number',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              },
              yaxis: {
                  title: 'Time(in secs)',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              },

          };
          Plotly.newPlot('allInstancesBootPredicted', dataPredicted, layout);
          Plotly.newPlot('allInstancesShutPredicted', data2Predicted, layout2);
      });
          makeGraph("t2.nano", "myDivPredicted");
      });

      function makeGraph(instanceType, divId) {

          var data = [];   var x = [];
          var y = [];
          var y2 = []; var i=0;
          fetch("/getAllVMTypesBootShutDownDataAvg")
                  .then(response => response.json())
      .then(instancesList => {
              var allData = [];
          //Once we fetch the list, we iterate over it
          instancesList.forEach(instance => {
              // Create the table row
              if (instanceType == instance.InstanceType) {
              instance.ExperimentLoop.forEach(Exploop => {
                  Exploop.Experiments.forEach(experiment => {
                  experiment.Instances.forEach(vm => {
                  x.push(i);
              y.push(vm.Running - vm.Pending);
              y2.push(vm.Terminated - vm.ShuttingDown);
              i++;
          });
          });
          });

              var trace1 = {
                  type: "scatter",
                  mode: "lines",
                  name: "Boot Time",
                  x: x,
                  y: y,
                  line: {color: '#17BxCF'},

              };
              var trace2 = {
                  type: "scatter",
                  mode: "lines",
                  name: "Shutdown Time",
                  x: x,
                  y: y2,
                  line: {color: '#17BECF'},

              };
              data.push(trace1);
              data.push(trace2);
              var layout = {
                  title: "Graph for " + instanceType,
                  xaxis: {
                      title: 'nth Instance',
                      titlefont: {
                          family: 'Courier New, monospace',
                          size: 14,
                          color: '#7f7f7f'
                      }
                  },
                  yaxis: {
                      title: 'Time(in secs)',
                      titlefont: {
                          family: 'Courier New, monospace',
                          size: 14,
                          color: '#7f7f7f'
                      }
                  }

              };

              Plotly.newPlot(divId, data, layout);
              return;
          }

      });

      });
      }

      function makeGraphAllInstances() {
          var data = [];
          var data2 = [];

          fetch("/getAllVMTypesBootShutDownDataAvg")
                  .then(response => response.json())
      .then(instancesList => {
              instancesList.forEach(instance => {
              var i=1; var x = [];
          var y = [];
          var y2 = [];
              instance.ExperimentLoop.forEach(Exploop => {
              Exploop.Experiments.forEach(experiment => {
              experiment.Instances.forEach(vm => {
              x.push(i);
          y.push(vm.Running - vm.Pending);
          y2.push(vm.Terminated - vm.ShuttingDown);
          i++;
      });
      });
      });
          var trace1 = {
              type: "scatter",
              mode: "lines",
              name: instance.InstanceType,
              x: x,
              y: y,
              line: {color: '#17BxCF'},

          };
          data.push(trace1);
          var trace2 = {
              type: "scatter",
              mode: "lines",
              name: instance.InstanceType,
              x: x,
              y: y2,
              line: {color: '#17BxCF'},

          };
          data2.push(trace2);
      });

          var layout = {
              title: "Booting Time Graph for all instance types ",
              xaxis: {
                  title: 'nth Instance',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              },
              yaxis: {
                  title: 'Time(in secs)',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              }

          };
          var layout2 = {
              title: "Shutting-Down Time Graph for all instance types ",
              xaxis: {
                  title: 'nth Instance',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              },
              yaxis: {
                  title: 'Time(in secs)',
                  titlefont: {
                      family: 'Courier New, monospace',
                      size: 14,
                      color: '#7f7f7f'
                  }
              },

          };
          Plotly.newPlot('allExpsInstancesBoot', data, layout);
          Plotly.newPlot('allExpsInstancesShut', data2, layout2);
          return;


      });
      }

  </script>
  </body>
</html>